<html>
<head>
	<title>µTorrent Options</title>
	<style>
		* {
			padding: 		0;
			margin: 		0:
		}
		body {
			font: 			80%/1.2em Verdana, Geneva, sans-serif;
			color:			#000;
		 background:		url(images/bg.jpg) top repeat-x fixed;
		
		}
		#main {
			width:			60%;
			margin:			2% auto;
		}
		#logo {
			text-align:		center;
		}
		#lang_select {
			position:		absolute;
			top:			2%;
		}
		
		h1 {
			margin: 		3% 0 3% 0;
			font-size:		120%;
		}
		#help p {
			text-align:		justify;
		}
		#help ul {
			margin-left:	5%;
		}
		#help img {
			width:			60%;
			margin:			3% 0 3% 0;
		}
		#fm {
			text-align:		center;
		}
		.ss {
			text-align:		center;
		}
</style>
</head>

<script type="text/javascript">
	function save_options()
	{
		var µtorrent_ip = document.getElementById("utorrent_ip").value;
		var µtorrent_port = document.getElementById("utorrent_port").value;
		var µtorrent_login = document.getElementById("utorrent_login").value;
		var µtorrent_password = document.getElementById("utorrent_password").value;
		var µtorrent_refresh = document.getElementById("utorrent_refresh").value;
		localStorage["utorrent_ip"] = µtorrent_ip;
		localStorage["utorrent_port"] = µtorrent_port;
		localStorage["utorrent_login"] = µtorrent_login;
		localStorage["utorrent_password"] = µtorrent_password;
		if (µtorrent_refresh < 1000)
		{
			localStorage["utorrent_refresh"] = 1000;
		}
		else
		{
			localStorage["utorrent_refresh"] = µtorrent_refresh;
		}
	}
	
	function restore_options()
	{
		var µtorrent_ip = localStorage["utorrent_ip"];
		if(µtorrent_ip) document.getElementById("utorrent_ip").value = µtorrent_ip;
	
		var µtorrent_port = localStorage["utorrent_port"];
		if(µtorrent_port) document.getElementById("utorrent_port").value = µtorrent_port;

		var µtorrent_login = localStorage["utorrent_login"];
		if(µtorrent_login) document.getElementById("utorrent_login").value = µtorrent_login;
		
		var µtorrent_password = localStorage["utorrent_password"];
		if(µtorrent_password) document.getElementById("utorrent_password").value = µtorrent_password;
		
		var µtorrent_refresh = localStorage["utorrent_refresh"];
		if(µtorrent_refresh) document.getElementById("utorrent_refresh").value = µtorrent_refresh
		else document.getElementById("utorrent_refresh").value = 2000;
		
		var favoriteLang = localStorage["language"];
		if (!favoriteLang)
		{
			document.getElementById("displayHelp").innerHTML = document.getElementById("en").innerHTML;
		}
		else
		{
			var select = document.getElementById("language");
			for (var i = 0; i < select.children.length; i++)
			{
				var child = select.children[i];
				if (child.value == favoriteLang)
				{
				  child.selected = "true";
				  break;
				}
			}
			document.getElementById("displayHelp").innerHTML = document.getElementById(favoriteLang).innerHTML;
		}
	}
	
	// Saves lang to localStorage.
	function save_lang()
	{
	  var select = document.getElementById("language");
	  var lang = select.children[select.selectedIndex].value;
	  localStorage["language"] = lang;
	}

</script>

<body onLoad="restore_options()">

<div id="main">

	<div id="lang_select">
		Lang : 
		<select id="language" onChange="save_lang();location.reload()">
			<option value="en">en</option>
			<option value="fr" >fr</option>
		</select>
	</div>

	<div id="logo"><img src="images/logo.png" alt="µtorrent Extension" /></div>

	<div id="displayHelp"></div>

	<div id="en" style="display:none">
		<div id="help">
			<h1>How do I get this to work ?</h1>
			<p>First, you need to activate the WebUI function of µtorrent. In order to do that, run µtorrent, and select Options in the menu bar, then Preferences, and Web UI. Check the "Enable Web UI" box, and choose an Username and a Password for you to log in.</p>
			<div class="ss"><img src="images/ss1.jpg" alt="ss1"/></div>
			<p>In order to make this extension works, you must fill in the form below. Don't forget to click on Save:</p>
		</div>
	</div>

	<div id="fr" style="display:none">
		<div id="help">
			<h1>Comment configurer l'extension ?</h1>
			<p>Premièrement, il est nécessaire d'activer la fonction WebUI d'µtorrent. Pour cela, lancez µtorrent, sélectionnez Options dans la barre de menu, puis Préférences, et enfin Web UI. Cochez la case "Autoriser Web UI", et définissez un nom d'utilisateur et un mot de passe qui vous serviront pour vous identifier.</p>
			<div class="ss"><img src="images/ss1.jpg" alt="ss1"/></div>
			<p>Pour faire fonctionner l'extension, vous devez remplir le formulaire ci-dessous. N'oubliez pas de cliquer sur Save:</p>
		</div>
	</div>


	<div id="fm">
		<form>
			<label id="server">Server :</label><br />
			<input type="text" id="utorrent_ip" /><br />
			<label id="port">Port :</label><br />
			<input type='text' id='utorrent_port' /><br />
			<label id="login">Login :</label><br />
			<input type='text' id='utorrent_login' /><br />
			<label id="password">Password :</label><br />
			<input type='password' id='utorrent_password' /><br />
			<label id="refresh">Refresh Interval :</label><br />
			<input type='text' id='utorrent_refresh' /><br />
			<button onClick="save_options()">Save</button>
		</form>
    </div>
    
</div>


</body>
</html>